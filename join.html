<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
    />
    <title>íšŒì›ê°€ì… í¼</title>
    <link rel="stylesheet" href="join.css" />
  </head>
  <body>
    <button class="toggle-btn" onclick="toggleDarkMode()">ğŸŒ™ ë‹¤í¬ ëª¨ë“œ</button>

    <fieldset>
      <form onsubmit="return handleSubmit(event)">
        <legend>íšŒì› ê°€ì…</legend>

        <label for="id">ì•„ì´ë””</label>
        <input type="id" id="id" placeholder="ì•„ì´ë””" name="id" required />

        <label for="password">ë¹„ë°€ë²ˆí˜¸</label>
        <input
          type="password"
          id="password"
          placeholder="ë¹„ë°€ë²ˆí˜¸"
          name="password"
          required
        />
        <small id="pwMessage" style="color: red"></small>
        <!-- ë¹„ë²ˆ ë©”ì‹œì§€ -->

        <label for="pwcheck">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
        <input
          type="password"
          id="pwcheck"
          placeholder="ë¹„ë°€ë²ˆí˜¸ í™•ì¸"
          name="pwcheck"
          required
        />
        <small id="pwCheckMessage" style="color: red"></small>
        <!-- í™•ì¸ ë©”ì‹œì§€ -->

        <label for="name">ì´ë¦„</label>
        <input
          type="text"
          id="name"
          placeholder="ì‚¬ìš©ì ì´ë¦„"
          name="name"
          required
        />

        <label for="phone">ì „í™”ë²ˆí˜¸</label>
        <input
          type="tel"
          id="phone"
          placeholder="íœ´ëŒ€ì „í™” ë²ˆí˜¸"
          name="phone"
          required
        />

        <label for="email">ì´ë©”ì¼</label>
        <input
          type="id"
          id="email"
          name="email"
          placeholder="ì˜ˆ: user@example.com"
          pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
          title="ì˜ˆ: user@example.com í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”."
          required
        />

        <label for="job">ì›í•˜ëŠ” ì§ë¬´</label>
        <select id="job" name="job" required>
          <option value="unknown">ë¯¸ì •</option>
          <option value="frontend">í”„ë¡ íŠ¸ì—”ë“œ</option>
          <option value="backend">ë°±ì—”ë“œ</option>
          <option value="design">ë””ìì¸</option>
          <option value="pm">PM</option>
        </select>

        <div class="mb-3">
          <label class="form-label">ì„±ë³„</label><br />
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="gender"
              id="male"
              value="male"
            />
            <label class="form-check-label" for="male">ë‚¨ì„±</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="gender"
              id="female"
              value="female"
            />
            <label class="form-check-label" for="female">ì—¬ì„±</label>
          </div>
        </div>

        <button type="submit" class="btn btn-primary w-100">ê°€ì…í•˜ê¸°</button>
      </form>
    </fieldset>

    <script>
      function toggleDarkMode() {
        document.body.classList.toggle("dark-mode");
        const btn = document.querySelector(".toggle-btn");
        btn.textContent = document.body.classList.contains("dark-mode")
          ? "â˜€ï¸ ë¼ì´íŠ¸ ëª¨ë“œ"
          : "ğŸŒ™ ë‹¤í¬ ëª¨ë“œ";
      }

      const pwInput = document.getElementById("password");
      const pwCheckInput = document.getElementById("pwcheck");
      const pwMessage = document.getElementById("pwMessage");
      const pwCheckMessage = document.getElementById("pwCheckMessage");

      pwInput.addEventListener("input", () => {
        const pw = pwInput.value;
        const regex = /^(?=.*[a-zA-Z])(?=.*\d).{6,}$/;

        if (pw === "") {
          pwMessage.textContent = "";
        } else if (!regex.test(pw)) {
          pwMessage.textContent =
            "ë¹„ë°€ë²ˆí˜¸ëŠ” 6ì ì´ìƒ, ì˜ë¬¸ê³¼ ìˆ«ìë¥¼ í¬í•¨í•´ì•¼ í•´ìš”.";
          pwMessage.style.color = "red";
        } else {
          pwMessage.textContent = "âœ… ì‚¬ìš© ê°€ëŠ¥í•œ ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤.";
          pwMessage.style.color = "green";
        }
      });

      pwCheckInput.addEventListener("input", () => {
        const pw = pwInput.value;
        const check = pwCheckInput.value;

        if (check === "") {
          pwCheckMessage.textContent = "";
        } else if (pw !== check) {
          pwCheckMessage.textContent = "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•Šì•„ìš”.";
          pwCheckMessage.style.color = "red";
        } else {
          pwCheckMessage.textContent = "âœ… ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•©ë‹ˆë‹¤.";
          pwCheckMessage.style.color = "green";
        }
      });

      function validatePasswords() {
        const pw = pwInput.value;
        const check = pwCheckInput.value;

        const regex = /^(?=.*[a-zA-Z])(?=.*\d).{6,}$/;
        if (!regex.test(pw)) {
          alert("ë¹„ë°€ë²ˆí˜¸ í˜•ì‹ì„ í™•ì¸í•˜ì„¸ìš”.");
          return false;
        }

        if (pw !== check) {
          alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
          return false;
        }

        return true;
      }
    </script>
    <script>
      function handleSubmit(event) {
        event.preventDefault();

        if (!validatePasswords()) return false;

        const form = event.target;
        const formData = new FormData(form);
        const userData = {};

        for (const [key, value] of formData.entries()) {
          if (key === "password" || key === "pwcheck") continue; // ë¹„ë°€ë²ˆí˜¸ ì œì™¸
          userData[key] = value;
        }

        sessionStorage.setItem("signupData", JSON.stringify(userData));

        window.open("welcome.html", "_blank");

        return false;
      }
    </script>
  </body>
</html>
